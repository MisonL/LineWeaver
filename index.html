<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LineWeaver - 文本换行符去除工具</title>
    <meta name="description" content="一个简单优雅的文本换行符去除工具，让文本像流水般顺畅连续，无需手动处理换行符">
    <meta name="keywords" content="文本处理, 换行符, 格式化, 粘贴, AI工具">
    <!-- 使用相对路径引用CSS文件 -->
    <link rel="stylesheet" href="./styles/enhanced.css">
    
    <!-- 添加favicon -->
    <link rel="icon" href="./favicon.ico" type="image/x-icon">
    <!-- Open Graph 标签 -->
    <meta property="og:title" content="LineWeaver - 文本换行符去除工具">
    <meta property="og:description" content="一个简单优雅的文本换行符去除工具，让文本像流水般顺畅连续，无需手动处理换行符">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://misonl.github.io/LineWeaver/">
</head>
<body>
    <!-- 无障碍跳转链接 -->
    <a href="#main-content" class="skip-link">跳转到主要内容</a>
    
    <header>
        <div class="container">
            <h1>🌊 LineWeaver</h1>
            <p class="subtitle">一个简单优雅的文本换行符去除工具</p>
            <!-- GitHub图标链接 -->
            <a href="https://github.com/MisonL/LineWeaver" target="_blank" class="github-link" title="查看GitHub项目">
                <svg class="github-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M12 0C5.37 0 0 5.37 0 12C0 17.31 3.435 21.795 8.205 23.385C8.805 23.49 9.03 23.13 9.03 22.815C9.03 22.53 9.015 21.585 9.015 20.58C6 21.135 5.22 19.845 4.98 19.17C4.845 18.825 4.26 17.76 3.75 17.475C3.33 17.25 2.73 16.695 3.735 16.68C4.68 16.665 5.355 17.55 5.58 17.91C6.66 19.725 8.385 19.215 9.075 18.9C9.18 18.12 9.495 17.595 9.84 17.295C7.17 16.995 4.38 15.96 4.38 11.37C4.38 10.065 4.845 8.985 5.61 8.145C5.49 7.845 5.07 6.615 5.73 4.965C5.73 4.965 6.735 4.65 9.03 6.195C9.99 5.925 11.01 5.79 12.03 5.79C13.05 5.79 14.07 5.925 15.03 6.195C17.325 4.635 18.33 4.965 18.33 4.965C18.99 6.615 18.57 7.845 18.45 8.145C19.215 8.985 19.68 10.05 19.68 11.37C19.68 15.975 16.875 16.995 14.205 17.295C14.64 17.67 15.015 18.39 15.015 19.515C15.015 21.12 15 22.41 15 22.815C15 23.13 15.225 23.505 15.825 23.385C20.565 21.795 24 17.295 24 12C24 5.37 18.63 0 12 0Z" fill="currentColor"/>
                </svg>
            </a>
        </div>
    </header>

    <main id="main-content">
        <div class="container">
            <!-- 上部控制区域 -->
            <div class="controls-area">
                <!-- URL获取区域 -->
                <section class="url-section" role="region" aria-labelledby="url-heading">
                    <h3 id="url-heading" class="sr-only">网页内容获取</h3>
                    <div class="url-input-container">
                        <label for="urlInput" class="sr-only">网页地址</label>
                        <input 
                            type="url" 
                            id="urlInput" 
                            placeholder="输入网址，获取内容并转换..." 
                            aria-describedby="url-help"
                            spellcheck="false"
                        />
                        <button id="fetchUrlBtn" class="btn btn-primary" aria-describedby="fetch-help">🔗 获取内容</button>
                    </div>
                    <p id="url-help" class="url-note">输入网址获取内容并自动转换为Markdown格式，方便AI理解。注意：受浏览器安全限制，某些网站可能无法获取。</p>
                    <div id="fetch-help" class="sr-only">获取网页内容并转换为文本格式进行处理</div>
                </section>

                <!-- 处理模式选择 -->
                <section class="mode-section">
                    <div class="mode-selector">
                        <label>
                            <input type="radio" name="processMode" value="simple">
                            <span class="mode-label">🔄 简单</span>
                        </label>
                        <label>
                            <input type="radio" name="processMode" value="smart" checked>
                            <span class="mode-label">🧠 智能</span>
                        </label>
                        <label>
                            <input type="radio" name="processMode" value="custom">
                            <span class="mode-label">🎨 自定义</span>
                        </label>
                    </div>
                    
                    <!-- 自定义配置区域 -->
                    <div id="customConfig" class="custom-config">
                        <div class="config-item">
                            <label for="paragraphSeparator">段落分隔符:</label>
                            <input type="text" id="paragraphSeparator" value="[PARA]" placeholder="如 [PARA], ||, ..." />
                        </div>
                        <div class="config-item">
                            <label for="listSeparator">列表项分隔符:</label>
                            <input type="text" id="listSeparator" value="[LIST]" placeholder="如 [LIST], →, ..." />
                        </div>
                    </div>
                </section>

                <!-- 处理按钮 -->
                <section class="action-section">
                    <button id="convertBtn" class="btn btn-primary convert-btn">
                        <span class="btn-text">🧠 智能转换</span>
                        <span class="btn-loading">
                            <span class="spinner"></span>
                        </span>
                    </button>
                </section>
            </div>

            <!-- 主要功能区域 - 左右并排 -->
            <div class="main-content">
                <!-- 左侧输入区域 -->
                <div class="input-area">
                    <section class="input-section">
                        <div class="input-header">
                            <h2 id="input-heading">📝 输入文本</h2>
                            <div class="button-group">
                                <button id="pasteBtn" class="btn btn-secondary" title="从剪贴板粘贴文本" aria-describedby="paste-help">📋 粘贴</button>
                                <button id="exampleBtn" class="btn btn-secondary" title="加载示例文本">💡 加载示例</button>
                            </div>
                        </div>
                        <label for="inputText" class="sr-only">待处理的文本内容</label>
                        <textarea 
                            id="inputText" 
                            class="text-area" 
                            placeholder="在此处粘贴包含换行符的文本..."
                            aria-describedby="input-help"
                            role="textbox"
                            aria-multiline="true"
                            spellcheck="false">
                        </textarea>
                        <div id="input-help" class="sr-only">粘贴包含换行符的文本，系统将智能处理格式</div>
                        <div id="paste-help" class="sr-only">点击粘贴按钮或使用Ctrl/Cmd+V快捷键</div>
                    </section>
                </div>

                <!-- 右侧输出区域 -->
                <div class="output-area">
                    <section class="output-section">
                        <div class="output-header">
                            <h2>🚀 转换结果</h2>
                            <div class="button-group">
                                <button id="copyBtn" class="btn btn-primary" disabled>
                                    <span class="btn-text">📋 复制到剪贴板</span>
                                    <span class="btn-success">✅已复制!</span>
                                </button>
                                
                            </div>
                        </div>
                        <textarea id="outputText" class="text-area output-textarea" placeholder="转换后的文本将显示在这里..." readonly></textarea>
                        
                        <!-- 文本统计 -->
                        <div id="textStats" class="text-stats">
                            <div class="stat-item">
                                <span class="stat-label">字符数:</span>
                                <span id="charCount" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">单词数:</span>
                                <span id="wordCount" class="stat-value">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">节省字符:</span>
                                <span id="savedChars" class="stat-value">0</span>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </div>
    </main>

    <!-- 错误提示 -->
    <div id="errorAlert" class="error-alert">
        <div class="error-content">
            <h3>⚠️ 检测到可能的错误信息</h3>
            <p>输入内容看起来可能是错误日志或代码片段。请确认您是否需要：</p>
            <ol>
                <li>删除格式化符号（换行符、缩进等）</li>
                <li>保留代码结构（使用智能模式）</li>
            </ol>
            <button id="clearErrorBtn" class="btn btn-secondary">清除并重试</button>
        </div>
    </div>

    <!-- Toast消息 -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <span class="toast-message"></span>
        </div>
    </div>

    <!-- 页脚 -->
    <footer>
        <div class="container">
            <p>&copy; 2025 LineWeaver - <a href="https://github.com/MisonL/LineWeaver" target="_blank" class="footer-link">GitHub</a></p>
            <div class="footer-info">
                <span class="footer-item">遵循 <a href="https://opensource.org/licenses/MIT" target="_blank" class="footer-link">MIT 许可证</a> 开源</span>
                <span class="footer-item">作者：Mison</span>
            </div>
        </div>
    </footer>

    <!-- 核心脚本 -->
    <script src="./scripts/utils.js"></script>
    <script src="./scripts/smart-mode.js"></script>
    <script src="./scripts/app.js"></script>
</body>
</html>